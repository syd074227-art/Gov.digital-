<!DOCTYPE html>

<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© - KR</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', 'Cairo', sans-serif; }
        body { background: linear-gradient(135deg, #0d1117 0%, #1a237e 50%, #0d1117 100%); min-height: 100vh; color: white; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 30px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .header-title h1 { font-size: 28px; color: #ff9800; margin-bottom: 5px; }
        .header-title p { color: #c9d1d9; }
        .stats { display: flex; gap: 20px; }
        .stat-card { background: rgba(255, 255, 255, 0.05); padding: 15px 25px; border-radius: 12px; text-align: center; border: 1px solid rgba(255, 255, 255, 0.1); }
        .stat-number { font-size: 32px; font-weight: 900; color: #ff6f00; }
        .stat-label { font-size: 13px; color: #c9d1d9; margin-top: 5px; }
        .filters { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 20px; margin-bottom: 20px; display: flex; gap: 15px; }
        .filter-btn { padding: 10px 20px; background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(255, 255, 255, 0.1); border-radius: 50px; color: white; cursor: pointer; transition: all 0.3s; font-weight: 600; }
        .filter-btn:hover { border-color: #ff6f00; }
        .filter-btn.active { background: linear-gradient(135deg, #ff6f00, #ff9800); border-color: #ff6f00; }
        .requests-grid { display: grid; gap: 20px; }
        .request-card { background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 30px; transition: all 0.3s; }
        .request-card:hover { border-color: #ff6f00; transform: translateY(-3px); }
        .request-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 25px; }
        .request-info { flex: 1; }
        .request-id { font-size: 14px; color: #ff6f00; font-weight: 700; margin-bottom: 10px; }
        .request-name { font-size: 24px; font-weight: 800; margin-bottom: 5px; }
        .request-date { font-size: 13px; color: #c9d1d9; }
        .request-images { display: flex; gap: 15px; }
        .request-img { width: 100px; height: 100px; border-radius: 12px; object-fit: cover; border: 2px solid rgba(255, 255, 255, 0.1); cursor: pointer; transition: all 0.3s; }
        .request-img:hover { transform: scale(1.05); border-color: #ff6f00; }
        .request-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 25px 0; }
        .detail-item { background: rgba(0, 0, 0, 0.3); padding: 15px; border-radius: 12px; border-right: 3px solid #ff6f00; }
        .detail-label { font-size: 12px; color: #c9d1d9; margin-bottom: 5px; }
        .detail-value { font-size: 16px; font-weight: 700; }
        .request-actions { display: flex; gap: 15px; margin-top: 25px; }
        .btn { flex: 1; padding: 15px; border: none; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-accept { background: linear-gradient(135deg, #00c853, #00e676); color: white; }
        .btn-accept:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0, 200, 83, 0.4); }
        .btn-reject { background: linear-gradient(135deg, #d50000, #ff1744); color: white; }
        .btn-reject:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(213, 0, 0, 0.4); }
        .empty-state { text-align: center; padding: 80px 20px; background: rgba(255, 255, 255, 0.05); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.1); }
        .empty-state i { font-size: 80px; color: #8b949e; margin-bottom: 20px; }
        .empty-state p { color: #c9d1d9; font-size: 18px; }
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.95); z-index: 1000; padding: 20px; overflow-y: auto; }
        .modal.show { display: flex; align-items: center; justify-content: center; }
        .image-modal { max-width: 90%; max-height: 90vh; border-radius: 12px; }
        @media (max-width: 768px) { .stats { flex-wrap: wrap; } .request-header { flex-direction: column; gap: 20px; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-title">
                <h1><i class="fas fa-shield-alt"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© - KR</h1>
                <p>Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ù„Ø¨Ø§Øª ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</p>
            </div>
            <div class="stats">
                <div class="stat-card"><div class="stat-number" id="pendingCount">0</div><div class="stat-label">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</div></div>
                <div class="stat-card"><div class="stat-number" id="acceptedCount">0</div><div class="stat-label">ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„</div></div>
                <div class="stat-card"><div class="stat-number" id="rejectedCount">0</div><div class="stat-label">ØªÙ… Ø§Ù„Ø±ÙØ¶</div></div>
            </div>
        </div>
        <div class="filters">
            <button class="filter-btn active" onclick="filterRequests('all')">Ø§Ù„ÙƒÙ„</button>
            <button class="filter-btn" onclick="filterRequests('pending')">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</button>
            <button class="filter-btn" onclick="filterRequests('accepted')">Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©</button>
            <button class="filter-btn" onclick="filterRequests('rejected')">Ø§Ù„Ù…Ø±ÙÙˆØ¶Ø©</button>
            <button class="filter-btn" onclick="loadRequests()"><i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ«</button>
        </div>
        <div class="requests-grid" id="requestsContainer"></div>
    </div>
    <div class="modal" id="imageModal" onclick="closeModal()"><img id="modalImage" class="image-modal"></div>
    <script>
        let currentFilter='all',allRequests=[];
        document.addEventListener('DOMContentLoaded',function(){console.log('ğŸ› Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¬Ø§Ù‡Ø²Ø©'),loadRequests()});
        function loadRequests(){allRequests=JSON.parse(localStorage.getItem('admin_pending_requests')||'[]'),console.log('ğŸ“¥ ØªÙ… ØªØ­Ù…ÙŠÙ„',allRequests.length,'Ø·Ù„Ø¨'),updateStats(),displayRequests()}
        function updateStats(){const pending=allRequests.filter(r=>'pending'===r.status).length,accepted=allRequests.filter(r=>'accepted'===r.status).length,rejected=allRequests.filter(r=>'rejected'===r.status).length;document.getElementById('pendingCount').textContent=pending,document.getElementById('acceptedCount').textContent=accepted,document.getElementById('rejectedCount').textContent=rejected}
        function displayRequests(){const container=document.getElementById('requestsContainer');let filteredRequests=allRequests;if('all'!==currentFilter&&(filteredRequests=allRequests.filter(r=>r.status===currentFilter)),0===filteredRequests.length)return void(container.innerHTML='<div class="empty-state"><i class="fas fa-inbox"></i><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p></div>');container.innerHTML=filteredRequests.map(request=>`
                <div class="request-card">
                    <div class="request-header">
                        <div class="request-info">
                            <div class="request-id">#${request.id}</div>
                            <div class="request-name">${request.fullName}</div>
                            <div class="request-date">${request.date}</div>
                        </div>
                        <div class="request-images">
                            ${request.nationalIdImage?`<img src="${request.nationalIdImage.data}" class="request-img" onclick="viewImage('${request.nationalIdImage.data}')" title="Ø§Ù„Ù‡ÙˆÙŠØ©">`:''} 
                            ${request.characterImage?`<img src="${request.characterImage.data}" class="request-img" onclick="viewImage('${request.characterImage.data}')" title="Ø§Ù„Ø´Ø®ØµÙŠØ©">`:''} 
                        </div>
                    </div>
                    <div class="request-details">
                        <div class="detail-item"><div class="detail-label">Ø§Ù„Ø¹Ù…Ø±</div><div class="detail-value">${request.age} Ø³Ù†Ø©</div></div>
                        <div class="detail-item"><div class="detail-label">Ø§Ù„Ù„Ø¹Ø¨Ø©</div><div class="detail-value">${request.gameUsername}</div></div>
                        <div class="detail-item"><div class="detail-label">Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</div><div class="detail-value">${request.discordUsername}</div></div>
                        <div class="detail-item"><div class="detail-label">Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©</div><div class="detail-value">${request.gameId}</div></div>
                        <div class="detail-item"><div class="detail-label">Ø§Ù„ØªØµÙ†ÙŠÙ</div><div class="detail-value">${request.departmentName}</div></div>
                        <div class="detail-item"><div class="detail-label">Ø§Ù„Ø±ØªØ¨Ø©</div><div class="detail-value">${request.rank}</div></div>
                    </div>
                    <div class="request-actions">
                        ${'pending'===request.status?`
                            <button class="btn btn-accept" onclick="acceptRequest('${request.id}')"><i class="fas fa-check"></i> Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨</button>
                            <button class="btn btn-reject" onclick="rejectRequest('${request.id}')"><i class="fas fa-times"></i> Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨</button>
                        `:'accepted'===request.status?'<button class="btn btn-accept" disabled style="opacity: 0.6;"><i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ù‚Ø¨ÙˆÙ„</button>':'<button class="btn btn-reject" disabled style="opacity: 0.6;"><i class="fas fa-times-circle"></i> ØªÙ… Ø§Ù„Ø±ÙØ¶</button>'}
                    </div>
                </div>
            `).join('')}
        function acceptRequest(requestId){if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù‚Ø¨ÙˆÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ØŸ'))return;allRequests=allRequests.map(req=>(req.id===requestId&&(req.status='accepted',saveActivatedUser(req)),req)),localStorage.setItem('admin_pending_requests',JSON.stringify(allRequests)),alert('âœ… ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!'),loadRequests()}
        function rejectRequest(requestId){if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø±ÙØ¶ Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ØŸ'))return;allRequests=allRequests.map(req=>(req.id===requestId&&(req.status='rejected'),req)),localStorage.setItem('admin_pending_requests',JSON.stringify(allRequests)),alert('âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨'),loadRequests()}
        function saveActivatedUser(req){let activatedUsers=JSON.parse(localStorage.getItem('activated_users')||'[]');activatedUsers.push({...req,activationDate:new Date().toISOString()}),localStorage.setItem('activated_users',JSON.stringify(activatedUsers)),console.log('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙØ¹Ù‘Ù„:',req.fullName)}
        function filterRequests(filter){currentFilter=filter,document.querySelectorAll('.filter-btn').forEach(btn=>btn.classList.remove('active')),event.target.classList.add('active'),displayRequests()}
        function viewImage(imageSrc){document.getElementById('modalImage').src=imageSrc,document.getElementById('imageModal').classList.add('show')}
        function closeModal(){document.getElementById('imageModal').classList.remove('show')}
    </script>
</body>
</html>
